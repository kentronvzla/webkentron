/*!
    photobox v1.9.8
    (c) 2013 Yair Even Or <http://dropthebit.com>

    MIT-style license.
*/
(function(R,j,ah){var ag,r,G,e=[],V,ai=-1,t,x,ad,U,af,Y,I,v,a,ac="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",l=!("placeholder" in j.createElement("input")),y=(function(){var ao=R("<p>")[0];ao.style.cssText="pointer-events:auto";return !ao.style.pointerEvents})(),H=false,Z,z,N=R(),X="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",O=s("transformOrigin"),m=s("transition"),d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(ao){return window.setTimeout(ao,1000/60)},n={},D=new Image(),an=new Image(),T,g,f,o,L,ab,aa,b,am,p,Q,B,S={single:false,beforeShow:null,afterClose:null,loop:true,thumb:null,thumbs:true,counter:"(A/B)",title:true,autoplay:false,time:3000,history:true,hideFlash:true,zoomable:true,wheelNextPrev:true,keys:{close:"27, 88, 67",prev:"37, 80",next:"39, 78"}},ak=R('<div id="pbOverlay">').append(ab=R('<input type="checkbox" id="pbThumbsToggler" checked hidden>'),am=R('<div class="pbLoader"><b></b><b></b><b></b></div>'),o=R('<div id="pbPrevBtn" class="prevNext"><b></b></div>').on("click",K),L=R('<div id="pbNextBtn" class="prevNext"><b></b></div>').on("click",K),B=R('<div class="pbWrapper">').append(g=R("<img>"),f=R("<div>")),T=R('<div id="pbCloseBtn">').on("click",ae)[0],p=R('<div id="pbAutoplayBtn">').append(R('<div class="pbProgress">')),aa=R('<div id="pbCaption">').append('<label for="pbThumbsToggler" title="thumbnails on/off"></label>',b=R('<div class="pbCaptionText">').append('<div class="title"></div><div class="counter">'),Q=R("<div>").addClass("pbThumbs")));function W(aq,ap){var ao=false;return function(){if(!ao){aq.call();ao=true;setTimeout(function(){ao=false},ap)}}}function aj(){y&&ak.hide();R(j).on("touchstart.testMouse",function(){R(j).off("touchstart.testMouse");H=true;ak.addClass("mobile")});p.off().on("click",v.toggle);Q.off().on("click","a",Y.click);l&&ak.addClass("msie");ak.off().on("click","img",function(ao){ao.stopPropagation()});R(j.body).append(ak);I=j.documentElement}R.fn.photobox=function(ap,ao,aq){return this.each(function(){var at,ar=R(this).data("_photobox");if(ar){if(ap==="destroy"){ar.destroy()}return this}if(typeof ap!="string"){ap="a"}if(ap==="prepareDOM"){aj();return this}at=R.extend({},S,ao||{});r=new ag(at,this,ap);R(this).data("_photobox",r);r.callback=aq})};ag=function(ao,aq,ar){this.options=R.extend({},ao);this.target=ar;this.selector=R(aq||j);this.thumbsList=null;var ap=this.imageLinksFilter(this.selector.find(ar));this.imageLinks=ap[0];this.images=ap[1];this.init()};ag.prototype={init:function(){var ao=this;this.selector.one("mouseenter.photobox",this.target,function(ap){ao.thumbsList=Y.generate.apply(ao)});this.selector.on("click.photobox",this.target,function(ap){ap.preventDefault();ao.open(this)});this.observerTimeout=null;if(this.selector[0].nodeType==1){ao.observeDOM(ao.selector[0],this.onDOMchanges.bind(this))}},onDOMchanges:function(ao){var ap=ao;clearTimeout(this.observerTimeout);ap.observerTimeout=setTimeout(function(){var at=ap.imageLinksFilter(ap.selector.find(ap.target)),ar=0,aq=false,au;if(ap.imageLinks.length==at[0].length){return}ap.imageLinks=at[0];ap.images=at[1];if(r){if(ap.selector==r.selector){e=ap.images;V=ap.imageLinks;for(au=e.length;au--;){if(e[au][0]==t){aq=true}}}}ap.thumbsList=Y.generate.apply(ap);Q.html(ap.thumbsList);if(ap.images.length&&t&&ap.options.thumbs){ar=ap.thumbsList.find('a[href="'+t+'"]').eq(0).parent().index();if(ar==-1){ar=0}Y.changeActive(ar,0)}},50)},open:function(ap){var ao=R.inArray(ap,this.imageLinks);if(ao==-1){return false}G=this.options;e=this.images;V=this.imageLinks;r=this;this.setup(1);ak.on(ac,function(){ak.off(ac).addClass("on");a(ao,true)}).addClass("show");if(l){ak.trigger("MSTransitionEnd")}return false},imageLinksFilter:function(ar){var aq=this,ao=[],ap={},at;return[ar.filter(function(au){var aw=R(this),ax,av="";ap.content=aw[0].getAttribute("title")||"";if(aq.options.thumb){ax=aw.find(aq.options.thumb)[0]}if(!aq.options.thumb||!ax){ax=aw.find("img")[0]}if(ax){at=ax.getAttribute("data-pb-captionlink");av=ax.getAttribute("src");ap.content=(ax.getAttribute("alt")||ax.getAttribute("title")||"")}if(at){at=at.split("[");if(at.length==2){ap.linkText=at[0];ap.linkHref=at[1].slice(0,-1)}else{ap.linkText=at;ap.linkHref=at}ap.content+=' <a href="'+ap.linkHref+'">'+ap.linkText+"</a>"}ao.push([aw[0].href,ap.content,av]);return true}),ao]},observeDOM:(function(){var ap=ah.MutationObserver||ah.WebKitMutationObserver,ao=ah.addEventListener;return function(ar,au){if(ap){var aq=this;var at=new ap(function(av,aw){if(av[0].addedNodes.length||av[0].removedNodes.length){au(aq)}});at.observe(ar,{childList:true,subtree:true})}else{if(ao){ar.addEventListener("DOMNodeInserted",au,false);ar.addEventListener("DOMNodeRemoved",au,false)}}}})(),setup:function(ao){var ap=ao?"on":"off";g[0].src=X;if(G.thumbs){if(!H){Q[ap]("mouseenter.photobox",Y.calc)[ap]("mousemove.photobox",Y.move)}}if(ao){g.css({transition:"0s"}).removeAttr("style");ak.show();Q.html(this.thumbsList).trigger("mouseenter.photobox");if(G.thumbs){ak.addClass("thumbs")}else{ab.prop("checked",false);ak.removeClass("thumbs")}if(this.images.length<2||G.single){ak.removeClass("thumbs hasArrows hasCounter hasAutoplay")}else{ak.addClass("hasArrows hasCounter");if(G.time>1000){ak.addClass("hasAutoplay");if(G.autoplay){v.progress.start()}else{v.pause()}}else{ak.removeClass("hasAutoplay")}}G.hideFlash&&R("iframe, object, embed").css("visibility","hidden")}else{R(ah).off("resize.photobox")}R(j).off("keydown.photobox")[ap]({"keydown.photobox":u});if(H){ak.removeClass("hasArrows");B[ap]("swipe",A)}if(G.zoomable){ak[ap]({"mousewheel.photobox":k});if(!l){Q[ap]({"mousewheel.photobox":C})}}if(!G.single&&G.wheelNextPrev){ak[ap]({"mousewheel.photobox":W(M,1000)})}},destroy:function(){G=this.options;this.selector.off("click.photobox",this.target).removeData("_photobox");ae()}};function A(aq,ap,ao){if(ap==1){g.css({transform:"translateX(25%)",transition:".2s",opacity:0});setTimeout(function(){a(U)},200)}else{if(ap==-1){g.css({transform:"translateX(-25%)",transition:".2s",opacity:0});setTimeout(function(){a(af)},200)}}if(ao==1){ab.prop("checked",true)}else{if(ao==-1){ab.prop("checked",false)}}}Y=(function(){var ay=0,at=0,ar=0,au=0,aq=null,ax,ap,az,av,ao,aw;return{generate:function(){var aF=R("<ul>"),aG=[],aA=this.imageLinks.size(),aH,aD,aE,aC,aB;for(aB=0;aB<aA;aB++){aE=this.imageLinks[aB];aD=this.images[aB][2];if(!aD){continue}aH=this.images[aB][1];aC=aE.rel?" class='"+aE.rel+"'":"";aG.push("<li"+aC+'><a href="'+aE.href+'"><img src="'+aD+'" alt="" title="'+aH+'" /></a></li>')}aF.html(aG.join(""));return aF},click:function(aB){aB.preventDefault();N.removeClass("active");N=R(this).parent().addClass("active");var aA=R(this.parentNode).index();return a(aA,0,1)},changeActiveTimeout:null,changeActive:function(aB,aA,aC){var aD=N.index();N.removeClass("active");N=Q.find("li").eq(aB).addClass("active");if(aC||!N[0]){return}clearTimeout(this.changeActiveTimeout);this.changeActiveTimeout=setTimeout(function(){var aE=N[0].offsetLeft+N[0].clientWidth/2-I.clientWidth/2;aA?Q.delay(800):Q.stop();Q.animate({scrollLeft:aE},500,"swing")},200)},calc:function(aA){ap=Q[0];ay=ap.clientWidth;at=ap.scrollWidth;ax=0.15*ay;ar=Q.offset().left;au=aA.pageX-ax-ar;aw=au/(ay-ax*2);ao=(at-ay)*aw;Q.animate({scrollLeft:ao},200);clearTimeout(aq);aq=setTimeout(function(){aq=null},200);return this},move:function(aB){if(aq){return}var aA=at/ay,aC=aB.pageX-ax-ar,aE,aD;if(aC<0){aC=0}aE=aC/(ay-ax*2);aD=(at-ay)*aE;d(function(){ap.scrollLeft=aD})}}})();v={autoPlayTimer:false,play:function(){v.autoPlayTimer=setTimeout(function(){a(af)},G.time);v.progress.start();p.removeClass("play");v.setTitle("Click to stop autoplay");G.autoplay=true},pause:function(){clearTimeout(v.autoPlayTimer);v.progress.reset();p.addClass("play");v.setTitle("Click to resume autoplay");G.autoplay=false},progress:{reset:function(){p.find("div").removeAttr("style");setTimeout(function(){p.removeClass("playing")},200)},start:function(){if(!l){p.find("div").css(m,G.time+"ms")}p.addClass("playing")}},setTitle:function(ao){if(ao){p.prop("title",ao+" (every "+G.time/1000+" seconds)")}},toggle:function(ao){ao.stopPropagation();v[G.autoplay?"pause":"play"]()}};function s(ar){var ap,aq=j.createElement("p").style,ao=["ms","O","Moz","Webkit"];if(aq[ar]==""){return ar}ar=ar.charAt(0).toUpperCase()+ar.slice(1);for(ap=ao.length;ap--;){if(aq[ao[ap]+ar]==""){return(ao[ap]+ar)}}}function u(ar){var aq=ar.keyCode,ap=G.keys,ao;return ap.close.indexOf(aq)>=0&&ae()||ap.next.indexOf(aq)>=0&&!G.single&&al(af)||ap.prev.indexOf(aq)>=0&&!G.single&&al(U)||true}function M(aq,ao,ap){if(ap==1){al(af)}else{if(ap==-1){al(U)}}}function K(){var ao=(this.id=="pbPrevBtn")?U:af;al(ao);return false}function F(ao){x=ai;ai=ao;t=e[ao][0];U=(ai||(G.loop?e.length:0))-1;af=((ai+1)%e.length)||(G.loop?0:-1)}function al(ao){if(!G.loop){var aq=ai==e.length-1&&ao==af,ap=ai==0&&ao==U;if(aq||ap){return}}a(ao)}a=(function(){var ao;return function(ap,at,aq){if(ao){return}ao=setTimeout(function(){ao=null},150);if(!ap||ap<0){ap=0}if(!G.loop){L[ap==e.length-1?"addClass":"removeClass"]("hide");o[ap==0?"addClass":"removeClass"]("hide")}if(typeof G.beforeShow=="function"){G.beforeShow(V[ap])}ak.removeClass("error").addClass(ap>ai?"next":"prev");F(ap);w();f.empty();n.onerror=null;g.add(f).data("zoom",1);ad=V[ap].rel=="video"?"video":"image";if(ad=="video"){f.html(i()).addClass("hide");P(at)}else{var ar=setTimeout(function(){ak.addClass("pbLoading")},50);if(l){ak.addClass("hide")}G.autoplay&&v.progress.reset();n=new Image();n.onload=function(){n.onload=null;if(U>=0){D.src=e[U][0]}if(af>=0){an.src=e[af][0]}clearTimeout(ar);P(at)};n.onerror=J;n.src=t}b.on(ac,E).addClass("change");if(at||l){E()}if(G.thumbs){Y.changeActive(ap,at,aq)}q.save()}})();function i(){var ap=e[ai][0],ao=R("<a>").prop("href",e[ai][0])[0].search?"&":"?";ap+=ao+"vq=hd720&wmode=opaque";return R("<iframe>").prop({scrolling:"no",frameborder:0,allowTransparency:true,src:ap}).attr({webkitAllowFullScreen:true,mozallowfullscreen:true,allowFullScreen:true})}function E(){b.off(ac).removeClass("change");if(G.counter){try{var ap=G.counter.replace("A",ai+1).replace("B",e.length)}catch(ao){G.counter="(A/B)";E()}aa.find(".counter").text(ap)}if(G.title){aa.find(".title").html("<span>"+e[ai][1]+"</span>")}}var q={save:function(){if("pushState" in window.history&&decodeURIComponent(window.location.hash.slice(1))!=t&&G.history){window.history.pushState("photobox",j.title+"-"+e[ai][1],window.location.pathname+window.location.search+"#"+encodeURIComponent(t))}},load:function(){if(G&&!G.history){return false}var aq=decodeURIComponent(window.location.hash.slice(1)),ap,ao;if(!aq&&ak.hasClass("show")){ae()}R('a[href="'+aq+'"]').trigger("click.photobox")},clear:function(){if(G.history&&"pushState" in window.history){window.history.pushState("photobox",j.title,window.location.pathname+window.location.search)}}};window.onpopstate=(function(){var ao=window.onpopstate;return function(ap){ao&&ao.apply(this,arguments);if(ap.state=="photobox"){q.load()}}})();function J(){ak.addClass("error");g[0].src=X;n.onerror=null}function P(ar){var aq,ap;ap=setTimeout(ao,2000);am.fadeOut(300,function(){ak.removeClass("pbLoading");am.removeAttr("style")});ak.addClass("hide");g.add(f).removeAttr("style").removeClass("zoomable");if(!ar&&V[x].rel=="video"){aq=f;g.addClass("prepare")}else{aq=g}if(ar||l){ao()}else{aq.on(ac,ao)}function ao(){clearTimeout(ap);aq.off(ac).css({transition:"none"});ak.removeClass("video");if(ad=="video"){g[0].src=X;f.addClass("prepare");ak.addClass("video")}else{g.prop({src:t,"class":"prepare"})}setTimeout(function(){g.add(f).removeAttr("style").removeClass("prepare");ak.removeClass("hide next prev");setTimeout(function(){g.add(f).on(ac,c);if(l){c()}},0)},50)}}function c(){g.add(f).off(ac).addClass("zoomable");if(ad=="video"){f.removeClass("hide")}else{p&&G.autoplay&&v.play()}if(typeof r.callback=="function"){r.callback.apply(V[ai])}}function k(ar,ao,ap){if(ap){return false}if(ad=="video"){var at=f.data("zoom")||1;at+=(ao/10);if(at<0.5){return false}f.data("zoom",at).css({width:624*at,height:351*at})}else{var at=g.data("zoom")||1,aq=g[0].getBoundingClientRect();at+=(ao/10);if(at<0.1){at=0.1}d(function(){g.data("zoom",at).css({transform:"scale("+at+")"})});if(aq.height>I.clientHeight||aq.width>I.clientWidth){R(j).on("mousemove.photobox",h)}else{R(j).off("mousemove.photobox");g[0].style[O]="50% 50%"}}return false}function C(aq,ar){aq.preventDefault();aq.stopPropagation();var ao=r.thumbsList,ap;ao.css("height",ao[0].clientHeight+(ar*10));ap=aa[0].clientHeight/2;B[0].style.cssText="margin-top: -"+ap+"px; padding: "+ap+"px 0;";Q.hide().show(0)}function h(ar){var at=(ar.clientY/I.clientHeight)*(I.clientHeight+200)-100,ap=at/I.clientHeight*100,aq=ar.clientX/I.clientWidth*100,ao=aq.toFixed(2)+"% "+ap.toFixed(2)+"%";d(function(){g[0].style[O]=ao})}function w(){clearTimeout(v.autoPlayTimer);R(j).off("mousemove.photobox");n.onload=function(){};n.src=D.src=an.src=t}function ae(){if(!ak.hasClass("show")){return false}w();f.find("iframe").prop("src","").empty();ag.prototype.setup();q.clear();ak.removeClass("on video").addClass("hide");g.on(ac,ao);l&&ao();setTimeout(function(){r=null},1000);function ao(){if(ak[0].className==""){return}ak.removeClass("show hide error pbLoading");g.removeAttr("class").removeAttr("style").off().data("zoom",1);aa.find(".title").empty();if(y){setTimeout(function(){ak.hide()},200)}G.hideFlash&&R("iframe, object, embed").css("visibility","visible")}setTimeout(ao,500);if(typeof G.afterClose==="function"){G.afterClose(ak)}}R.event.special.swipe={setup:function(){R(this).bind("touchstart",R.event.special.swipe.handler)},teardown:function(){R(this).unbind("touchstart",R.event.special.swipe.handler)},handler:function(ap){var ax=[].slice.call(arguments,1),au=ap.originalEvent.touches,av,at,ar=0,aq=0,aw=this;ap=R.event.fix(ap);if(au.length==1){av=au[0].pageX;at=au[0].pageY;this.addEventListener("touchmove",ao,false)}function ay(){aw.removeEventListener("touchmove",ao);av=at=null}function ao(aB){aB.preventDefault();var aA=av-aB.touches[0].pageX,az=at-aB.touches[0].pageY;if(Math.abs(aA)>=20){ay();ar=(aA>0)?-1:1}else{if(Math.abs(az)>=20){ay();aq=(az>0)?1:-1}}ap.type="swipe";ax.unshift(ap,ar,aq);return(R.event.dispatch||R.event.handle).apply(aw,ax)}}};
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
     * Licensed under the MIT License (LICENSE.txt).
     *
     * Version: 3.1.11
     *
     * Requires: jQuery 1.2.2+
     */
!function(ao){"function"==typeof define&&define.amd?define(["jquery"],ao):"object"==typeof exports?module.exports=ao:ao(jQuery)}(function(az){function ay(aK){var aJ=aK||window.event,aI=aq.call(arguments,1),aH=0,aG=0,aF=0,aE=0,aD=0,aC=0;if(aK=az.event.fix(aJ),aK.type="mousewheel","detail" in aJ&&(aF=-1*aJ.detail),"wheelDelta" in aJ&&(aF=aJ.wheelDelta),"wheelDeltaY" in aJ&&(aF=aJ.wheelDeltaY),"wheelDeltaX" in aJ&&(aG=-1*aJ.wheelDeltaX),"axis" in aJ&&aJ.axis===aJ.HORIZONTAL_AXIS&&(aG=-1*aF,aF=0),aH=0===aF?aG:aF,"deltaY" in aJ&&(aF=-1*aJ.deltaY,aH=aF),"deltaX" in aJ&&(aG=aJ.deltaX,0===aF&&(aH=-1*aG)),0!==aF||0!==aG){if(1===aJ.deltaMode){var aB=az.data(this,"mousewheel-line-height");aH*=aB,aF*=aB,aG*=aB}else{if(2===aJ.deltaMode){var aA=az.data(this,"mousewheel-page-height");aH*=aA,aF*=aA,aG*=aA}}if(aE=Math.max(Math.abs(aF),Math.abs(aG)),(!au||au>aE)&&(au=aE,aw(aJ,aE)&&(au/=40)),aw(aJ,aE)&&(aH/=40,aG/=40,aF/=40),aH=Math[aH>=1?"floor":"ceil"](aH/au),aG=Math[aG>=1?"floor":"ceil"](aG/au),aF=Math[aF>=1?"floor":"ceil"](aF/au),ao.settings.normalizeOffset&&this.getBoundingClientRect){var aL=this.getBoundingClientRect();aD=aK.clientX-aL.left,aC=aK.clientY-aL.top}return aK.deltaX=aG,aK.deltaY=aF,aK.deltaFactor=au,aK.offsetX=aD,aK.offsetY=aC,aK.deltaMode=0,aI.unshift(aK,aH,aG,aF),av&&clearTimeout(av),av=setTimeout(ax,200),(az.event.dispatch||az.event.handle).apply(this,aI)}}function ax(){au=null}function aw(aB,aA){return ao.settings.adjustOldDeltas&&"mousewheel"===aB.type&&aA%120===0}var av,au,at=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],ar="onwheel" in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],aq=Array.prototype.slice;if(az.event.fixHooks){for(var ap=at.length;ap;){az.event.fixHooks[at[--ap]]=az.event.mouseHooks}}var ao=az.event.special.mousewheel={version:"3.1.11",setup:function(){if(this.addEventListener){for(var aA=ar.length;aA;){this.addEventListener(ar[--aA],ay,!1)}}else{this.onmousewheel=ay}az.data(this,"mousewheel-line-height",ao.getLineHeight(this)),az.data(this,"mousewheel-page-height",ao.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var aA=ar.length;aA;){this.removeEventListener(ar[--aA],ay,!1)}}else{this.onmousewheel=null}az.removeData(this,"mousewheel-line-height"),az.removeData(this,"mousewheel-page-height")},getLineHeight:function(aA){var aB=az(aA)["offsetParent" in az.fn?"offsetParent":"parent"]();return aB.length||(aB=az("body")),parseInt(aB.css("fontSize"),10)},getPageHeight:function(aA){return az(aA).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};az.fn.extend({mousewheel:function(aA){return aA?this.bind("mousewheel",aA):this.trigger("mousewheel")},unmousewheel:function(aA){return this.unbind("mousewheel",aA)}})});R(j).ready(aj);window._photobox={DOM:{overlay:ak},close:ae,history:q,defaults:S}})(jQuery,document,window);